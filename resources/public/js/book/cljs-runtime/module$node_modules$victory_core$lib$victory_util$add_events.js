shadow$provide.module$node_modules$victory_core$lib$victory_util$add_events=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){var JSCompiler_temp=0;for(var arr2=Array(arr.length);JSCompiler_temp<arr.length;JSCompiler_temp++)arr2[JSCompiler_temp]=arr[JSCompiler_temp];JSCompiler_temp=arr2}else JSCompiler_temp=void 0;JSCompiler_temp||(JSCompiler_temp=Symbol.iterator in Object(arr)||
"[object Arguments]"===Object.prototype.toString.call(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to spread non-iterable instance");return arr}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,
protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==typeof call&&"function"!==typeof call?_assertThisInitialized(self):call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&
superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _isNil2=_interopRequireDefault(require("module$node_modules$lodash$isNil")),
_isEmpty2=_interopRequireDefault(require("module$node_modules$lodash$isEmpty")),_without2=_interopRequireDefault(require("module$node_modules$lodash$without")),_pick2=_interopRequireDefault(require("module$node_modules$lodash$pick")),_isFunction2=_interopRequireDefault(require("module$node_modules$lodash$isFunction")),_keys2=_interopRequireDefault(require("module$node_modules$lodash$keys")),_assign2=_interopRequireDefault(require("module$node_modules$lodash$assign")),_defaults2=_interopRequireDefault(require("module$node_modules$lodash$defaults")),
_react=_interopRequireDefault(require("module$node_modules$react$index")),_events=_interopRequireDefault(require("module$node_modules$victory_core$lib$victory_util$events")),_reactFastCompare=_interopRequireDefault(require("module$node_modules$react_fast_compare$index")),_victoryTransition=_interopRequireDefault(require("module$node_modules$victory_core$lib$victory_transition$victory_transition")),datumHasXandY=function(datum){return!(0,_isNil2.default)(datum._x)&&!(0,_isNil2.default)(datum._y)},
defaultComponents=[{name:"parent",index:"parent"},{name:"data"},{name:"labels"}];exports.default=function(WrappedComponent,options){return function(_WrappedComponent){function addEvents(props){if(!(this instanceof addEvents))throw new TypeError("Cannot call a class as a function");var _this=_possibleConstructorReturn(this,(addEvents.__proto__||Object.getPrototypeOf(addEvents)).call(this,props));var getScopedEvents=_events.default.getScopedEvents.bind(_assertThisInitialized(_this)),boundGetEvents=
_events.default.getEvents.bind(_assertThisInitialized(_this));_this.state={};_this.getEvents=function(p,target,eventKey){return boundGetEvents(p,target,eventKey,getScopedEvents)};_this.getEventState=_events.default.getEventState.bind(_assertThisInitialized(_this));var calculatedValues=_this.getCalculatedValues(props);_this.cacheValues(calculatedValues);_this.externalMutations=_this.getExternalMutations(props);_this.calculatedState=_this.getStateChanges(props,calculatedValues);return _this}_inherits(addEvents,
_WrappedComponent);_createClass(addEvents,[{key:"shouldComponentUpdate",value:function(nextProps){var calculatedValues=this.getCalculatedValues(nextProps),externalMutations=this.getExternalMutations(nextProps),animating=this.props.animating||this.props.animate,newMutation=!(0,_reactFastCompare.default)(externalMutations,this.externalMutations);if(animating||newMutation)return this.cacheValues(calculatedValues),this.externalMutations=externalMutations,this.applyExternalMutations(nextProps,externalMutations),
!0;externalMutations=this.getStateChanges(nextProps,calculatedValues);return(0,_reactFastCompare.default)(this.calculatedState,externalMutations)?(0,_reactFastCompare.default)(this.props,nextProps)?!1:(this.cacheValues(calculatedValues),!0):(this.calculatedState=externalMutations,this.cacheValues(calculatedValues),!0)}},{key:"getStateChanges",value:function(props,calculatedValues){var _this2=this,getSharedEventState=calculatedValues.getSharedEventState;if(!calculatedValues.hasEvents)return{};var getState=
function(key,type){key=(0,_defaults2.default)({},_this2.getEventState(key,type),getSharedEventState(key,type));return(0,_isEmpty2.default)(key)?void 0:key};options=options||{};return(options.components||defaultComponents).map(function(component){if(props.standalone||"parent"!==component.name)return void 0!==component.index?getState(component.index,component.name):calculatedValues.dataKeys.map(function(key){return getState(key,component.name)}).filter(Boolean)}).filter(Boolean)}},{key:"applyExternalMutations",
value:function(props,externalMutations){if(!(0,_isEmpty2.default)(externalMutations)){var callbacks=props.externalEventMutations.reduce(function(memo,mutation){return memo=(0,_isFunction2.default)(mutation.callback)?memo.concat(mutation.callback):memo},[]);this.setState(externalMutations,callbacks.length?function(){callbacks.forEach(function(c){return c()})}:void 0)}}},{key:"getCalculatedValues",value:function(props){var sharedEvents=props.sharedEvents,componentEvents=_events.default.getComponentEvents(props,
WrappedComponent.expectedComponents);sharedEvents=sharedEvents&&(0,_isFunction2.default)(sharedEvents.getEventState)?sharedEvents.getEventState:function(){};var baseProps=this.getBaseProps(props,sharedEvents),dataKeys=(0,_keys2.default)(baseProps).filter(function(key){return"parent"!==key}),hasEvents=props.events||props.sharedEvents||componentEvents;props=this.getAllEvents(props);return{componentEvents:componentEvents,getSharedEventState:sharedEvents,baseProps:baseProps,dataKeys:dataKeys,hasEvents:hasEvents,
events:props}}},{key:"getExternalMutations",value:function(props){var sharedEvents=props.sharedEvents;props=props.externalEventMutations;return(0,_isEmpty2.default)(props)||sharedEvents?void 0:_events.default.getExternalMutations(props,this.baseProps,this.state)}},{key:"cacheValues",value:function(obj){var _this3=this;(0,_keys2.default)(obj).forEach(function(key){_this3[key]=obj[key]})}},{key:"getBaseProps",value:function(props,getSharedEventState){getSharedEventState=getSharedEventState||this.getSharedEventState;
getSharedEventState=getSharedEventState("parent","parent");var parentState=this.getEventState("parent","parent");getSharedEventState=(0,_defaults2.default)({},parentState,getSharedEventState);getSharedEventState=(parentState=getSharedEventState.parentControlledProps)?(0,_pick2.default)(getSharedEventState,parentState):{};props=(0,_defaults2.default)({},getSharedEventState,props);return(0,_isFunction2.default)(WrappedComponent.getBaseProps)?WrappedComponent.getBaseProps(props):{}}},{key:"getAllEvents",
value:function(props){if(Array.isArray(this.componentEvents)){var _componentEvents;return Array.isArray(props.events)?(_componentEvents=this.componentEvents).concat.apply(_componentEvents,_toConsumableArray(props.events)):this.componentEvents}return props.events}},{key:"getComponentProps",value:function(component,type,index){var key=this.dataKeys&&this.dataKeys[index]||index,id="".concat(this.props.name||WrappedComponent.role,"-").concat(type,"-").concat(key),baseProps=this.baseProps[key]&&this.baseProps[key][type]||
this.baseProps[key];if(baseProps||this.hasEvents){if(this.hasEvents){var baseEvents=this.getEvents(this.props,type,key);component=(0,_defaults2.default)({index:index,key:id},this.getEventState(key,type),this.getSharedEventState(key,type),component.props,baseProps,{id:id});key=(0,_defaults2.default)({},_events.default.getPartialEvents(baseEvents,key,component),component.events);return(0,_assign2.default)({},component,{events:key})}return(0,_defaults2.default)({index:index,key:id},component.props,baseProps,
{id:id})}}},{key:"renderContainer",value:function(component,children){var parentProps=component.type&&"container"===component.type.role?this.getComponentProps(component,"parent","parent"):{};return _react.default.cloneElement(component,parentProps,children)}},{key:"animateComponent",value:function(props,defaultAnimationWhitelist){return _react.default.createElement(_victoryTransition.default,{animate:props.animate,animationWhitelist:props.animate&&props.animate.animationWhitelist?props.animate.animationWhitelist:
defaultAnimationWhitelist},_react.default.createElement(this.constructor,props))}},{key:"renderContinuousData",value:function(props){var _this4=this,dataComponent=props.dataComponent,labelComponent=props.labelComponent;props=props.groupComponent;var labelComponents=(0,_without2.default)(this.dataKeys,"all").reduce(function(memo,key){(key=_this4.getComponentProps(labelComponent,"labels",key))&&void 0!==key.text&&null!==key.text&&(memo=memo.concat(_react.default.cloneElement(labelComponent,key)));return memo},
[]),dataProps=this.getComponentProps(dataComponent,"data","all");dataComponent=[_react.default.cloneElement(dataComponent,dataProps)].concat(_toConsumableArray(labelComponents));return this.renderContainer(props,dataComponent)}},{key:"renderData",value:function(props){var _this5=this,shouldRenderDatum=1<arguments.length&&void 0!==arguments[1]?arguments[1]:datumHasXandY,dataComponent=props.dataComponent,labelComponent=props.labelComponent,groupComponent=props.groupComponent,dataComponents=this.dataKeys.reduce(function(validDataComponents,
_dataKey,index){_dataKey=_this5.getComponentProps(dataComponent,"data",index);shouldRenderDatum(_dataKey.datum)&&validDataComponents.push(_react.default.cloneElement(dataComponent,_dataKey));return validDataComponents},[]),labelComponents=this.dataKeys.map(function(_dataKey,index){_dataKey=_this5.getComponentProps(labelComponent,"labels",index);if(void 0!==_dataKey.text&&null!==_dataKey.text)return _react.default.cloneElement(labelComponent,_dataKey)}).filter(Boolean);dataComponents=_toConsumableArray(dataComponents).concat(_toConsumableArray(labelComponents));
return this.renderContainer(groupComponent,dataComponents)}}]);return addEvents}(WrappedComponent)}}
//# sourceMappingURL=module$node_modules$victory_core$lib$victory_util$add_events.js.map
