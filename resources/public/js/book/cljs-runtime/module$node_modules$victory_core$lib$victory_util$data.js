shadow$provide.module$node_modules$victory_core$lib$victory_util$data=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){var JSCompiler_temp=0;for(var arr2=Array(arr.length);JSCompiler_temp<arr.length;JSCompiler_temp++)arr2[JSCompiler_temp]=arr[JSCompiler_temp];JSCompiler_temp=arr2}else JSCompiler_temp=void 0;JSCompiler_temp||(JSCompiler_temp=Symbol.iterator in Object(arr)||
"[object Arguments]"===Object.prototype.toString.call(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to spread non-iterable instance");return arr}function parseDatum(datum){var immutableDatumWhitelist={errorX:!0,errorY:!0};return _immutable.default.isImmutable(datum)?_immutable.default.shallowToJS(datum,immutableDatumWhitelist):datum}function getLength(data){return _immutable.default.isIterable(data)?data.size:data.length}function generateDataArray(props,
axis){axis=((0,_isPlainObject2.default)(props.domain)?props.domain[axis]:props.domain)||_scale.default.getBaseScale(props,axis).domain();var samples=props.samples||1;props=Math.max.apply(Math,_toConsumableArray(axis));axis=Math.min.apply(Math,_toConsumableArray(axis));samples=(props-axis)/samples;axis=(0,_range2.default)(axis,props,samples);return(0,_last2.default)(axis)===props?axis:axis.concat(props)}function sortData(dataset,sortKey){var sortOrder=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
"ascending";if(!sortKey)return dataset;if("x"===sortKey||"y"===sortKey)sortKey="_".concat(sortKey);sortOrder="ascending"===sortOrder?"asc":"desc";return(0,_orderBy2.default)(dataset,sortKey,sortOrder)}function cleanData(dataset,props){var scaleType={x:_scale.default.getScaleType(props,"x"),y:_scale.default.getScaleType(props,"y")};if("log"!==scaleType.x&&"log"!==scaleType.y)return dataset;var rules=function(datum,axis){return"log"===scaleType[axis]?0!==datum["_".concat(axis)]:!0};return dataset.filter(function(datum){return rules(datum,
"x")&&rules(datum,"y")&&rules(datum,"y0")})}function getEventKey(key){return(0,_isFunction2.default)(key)?key:null===key||void 0===key?function(){}:(0,_property2.default)(key)}function addEventKeys(props,data){var hasEventKeyAccessor=!!props.eventKey,eventKeyAccessor=getEventKey(props.eventKey);return data.map(function(datum){if(void 0!==datum.eventKey)return datum;if(hasEventKeyAccessor){var eventKey=eventKeyAccessor(datum);return void 0!==eventKey?(0,_assign2.default)({eventKey:eventKey},datum):
datum}return datum})}function createStringMap(props,axis){var currentAxis=_helpers.default.getCurrentAxis(axis,props.horizontal),stringsFromAxes=getStringsFromAxes(props,currentAxis);currentAxis=getStringsFromCategories(props,currentAxis);props=getStringsFromData(props,axis);stringsFromAxes=(0,_uniq2.default)(_toConsumableArray(stringsFromAxes).concat(_toConsumableArray(currentAxis),_toConsumableArray(props)));return 0===stringsFromAxes.length?null:stringsFromAxes.reduce(function(memo,string,index){memo[string]=
index+1;return memo},{})}function formatData(dataset,props,expectedKeys){if(!Array.isArray(dataset)&&!_immutable.default.isIterable(dataset)||1>getLength(dataset))return[];var defaultKeys=["x","y","y0"];expectedKeys=Array.isArray(expectedKeys)?expectedKeys:defaultKeys;var stringMap={x:-1!==expectedKeys.indexOf("x")?createStringMap(props,"x"):void 0,y:-1!==expectedKeys.indexOf("y")?createStringMap(props,"y"):void 0,y0:-1!==expectedKeys.indexOf("y0")?createStringMap(props,"y"):void 0},accessor=expectedKeys.reduce(function(memo,
type){memo[type]=_helpers.default.createAccessor(void 0!==props[type]?props[type]:type);return memo},{});dataset=(0,_isEqual2.default)(expectedKeys,defaultKeys)&&"_x"===props.x&&"_y"===props.y&&"_y0"===props.y0?dataset:dataset.reduce(function(dataArr,datum,index){datum=parseDatum(datum);var fallbackValues={x:index,y:datum};index=expectedKeys.reduce(function(memo,type){var processedValue=accessor[type](datum);processedValue=void 0!==processedValue?processedValue:fallbackValues[type];void 0!==processedValue&&
("string"===typeof processedValue&&stringMap[type]?(memo["".concat(type,"Name")]=processedValue,memo["_".concat(type)]=stringMap[type][processedValue]):memo["_".concat(type)]=processedValue);return memo},{});index=(0,_assign2.default)({},index,datum);(0,_isEmpty2.default)(index)||dataArr.push(index);return dataArr},[]);dataset=sortData(dataset,props.sortKey,props.sortOrder);dataset=cleanData(dataset,props);return addEventKeys(props,dataset)}function generateData(props){var xValues=generateDataArray(props,
"x"),yValues=generateDataArray(props,"y");return xValues.map(function(x,i){return{x:x,y:yValues[i]}})}function getCategories(props,axis){axis=_helpers.default.getCurrentAxis(axis,props.horizontal);return props.categories&&!Array.isArray(props.categories)?props.categories[axis]:props.categories}function getStringsFromAxes(props,axis){var tickValues=props.tickValues;props=props.tickFormat;return(tickValues&&(Array.isArray(tickValues)||tickValues[axis])?tickValues[axis]||tickValues:props&&Array.isArray(props)?
props:[]).filter(function(val){return"string"===typeof val})}function getStringsFromCategories(props,axis){return props.categories?(props=(props=getCategories(props,axis))&&props.filter(function(val){return"string"===typeof val}))?_collection.default.removeUndefined(props):[]:[]}function getStringsFromData(props,axis){if(!Array.isArray(props.data)&&!_immutable.default.isIterable(props.data))return[];var accessor=_helpers.default.createAccessor(void 0===props[axis]?axis:props[axis]);axis=props.data.reduce(function(memo,
d){memo.push(parseDatum(d));return memo},[]);return sortData(axis,props.sortKey,props.sortOrder).reduce(function(dataArr,datum){datum=parseDatum(datum);dataArr.push(accessor(datum));return dataArr},[]).filter(function(datum){return"string"===typeof datum}).reduce(function(prev,curr){void 0!==curr&&null!==curr&&-1===prev.indexOf(curr)&&prev.push(curr);return prev},[])}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _includes2=_interopRequireDefault(require("module$node_modules$lodash$includes")),
_isEqual2=_interopRequireDefault(require("module$node_modules$lodash$isEqual")),_isEmpty2=_interopRequireDefault(require("module$node_modules$lodash$isEmpty")),_orderBy2=_interopRequireDefault(require("module$node_modules$lodash$orderBy")),_property2=_interopRequireDefault(require("module$node_modules$lodash$property")),_isPlainObject2=_interopRequireDefault(require("module$node_modules$lodash$isPlainObject")),_isFunction2=_interopRequireDefault(require("module$node_modules$lodash$isFunction")),_last2=
_interopRequireDefault(require("module$node_modules$lodash$last")),_range2=_interopRequireDefault(require("module$node_modules$lodash$range")),_uniq2=_interopRequireDefault(require("module$node_modules$lodash$uniq")),_assign2=_interopRequireDefault(require("module$node_modules$lodash$assign")),_react=_interopRequireDefault(require("module$node_modules$react$index")),_helpers=_interopRequireDefault(require("module$node_modules$victory_core$lib$victory_util$helpers")),_collection=_interopRequireDefault(require("module$node_modules$victory_core$lib$victory_util$collection")),
_scale=_interopRequireDefault(require("module$node_modules$victory_core$lib$victory_util$scale")),_immutable=_interopRequireDefault(require("module$node_modules$victory_core$lib$victory_util$immutable"));exports.default={createStringMap:createStringMap,downsample:function(data,maxPoints){var startingIndex=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,dataLength=getLength(data);if(dataLength>maxPoints){var k=Math.pow(2,Math.ceil(Math.log2(dataLength/maxPoints)));return data.filter(function(d,
i){return 0===(i+startingIndex)%k})}return data},formatData:formatData,generateData:generateData,getCategories:getCategories,getData:function(props){return props.data?formatData(props.data,props):formatData(generateData(props),props)},getStringsFromAxes:getStringsFromAxes,getStringsFromCategories:getStringsFromCategories,getStringsFromData:getStringsFromData,isDataComponent:function(component){var role=component&&component.type?component.type.role:"";"portal"===role&&(component=_react.default.Children.toArray(component.props.children),
component=component.length?(component=component[0])&&component.type?component.type.role:"":"",role=component);return(0,_includes2.default)("area bar boxplot candlestick errorbar group line pie scatter stack voronoi".split(" "),role)}}}
//# sourceMappingURL=module$node_modules$victory_core$lib$victory_util$data.js.map
