shadow$provide.module$node_modules$victory_selection_container$lib$selection_helpers=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){var JSCompiler_temp=0;for(var arr2=Array(arr.length);JSCompiler_temp<arr.length;JSCompiler_temp++)arr2[JSCompiler_temp]=arr[JSCompiler_temp];JSCompiler_temp=arr2}else JSCompiler_temp=void 0;JSCompiler_temp||(JSCompiler_temp=Symbol.iterator in
Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to spread non-iterable instance");return arr}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _includes2=_interopRequireDefault(require("module$node_modules$lodash$includes")),_isFunction2=_interopRequireDefault(require("module$node_modules$lodash$isFunction"));global=_interopRequireDefault(require("module$node_modules$lodash$throttle"));
var _defaults2=_interopRequireDefault(require("module$node_modules$lodash$defaults")),_assign2=_interopRequireDefault(require("module$node_modules$lodash$assign")),_victoryCore=require("module$node_modules$victory_core$lib$index"),_react=_interopRequireDefault(require("module$node_modules$react$index"));require={getDatasets:function(props){return props.data?[{data:props.data}]:_victoryCore.Helpers.reduceChildren(_react.default.Children.toArray(props.children),function(child,childName,parent){var blacklist=
props.selectionBlacklist||[];if(!_victoryCore.Data.isDataComponent(child)||(0,_includes2.default)(blacklist,childName))return null;if(child.type&&(0,_isFunction2.default)(child.type.getData))return child=parent?_react.default.cloneElement(child,parent.props):child,(child=child.props&&child.type.getData(child.props))?{childName:childName,data:child}:null;child=_victoryCore.Data.getData(child.props);return(child=Array.isArray(child)&&0<child.length?child:void 0)?{childName:childName,data:child}:null},
props)},filterDatasets:function(props,datasets,bounds){var _this=this;datasets=datasets.reduce(function(memo,dataset){var selectedData=_this.getSelectedData(props,dataset.data,bounds);return memo=selectedData?memo.concat({childName:dataset.childName,eventKey:selectedData.eventKey,data:selectedData.data}):memo},[]);return datasets.length?datasets:null},getPoint:function(props,point){return props.horizontal?{_x:point._y,_y:point._x,_x1:point._y1,_y1:point._x1,_x0:point._y0,_y0:point._x0}:point},getSelectedData:function(props,
dataset){for(var x1=props.x1,y1=props.y1,x2=props.x2,y2=props.y2,eventKey=[],data=[],count=0,index=0,len=dataset.length;index<len;index++){var datum=dataset[index],point=this.getPoint(props,datum);point=_victoryCore.Helpers.scalePoint(props,point);point.x>=Math.min(x1,x2)&&point.x<=Math.max(x1,x2)&&point.y>=Math.min(y1,y2)&&point.y<=Math.max(y1,y2)&&(data[count]=datum,eventKey[count]=void 0===datum.eventKey?index:datum.eventKey,count++)}return 0<count?{eventKey:eventKey,data:data}:null},onMouseDown:function(evt,
targetProps){evt.preventDefault();var activateSelectedData=targetProps.activateSelectedData,polar=targetProps.polar,selectedData=targetProps.selectedData;if(!targetProps.allowSelection)return{};var dimension=targetProps.selectionDimension,parentSVG=targetProps.parentSVG||_victoryCore.Selection.getParentSVG(evt);evt=_victoryCore.Selection.getSVGEventCoordinates(evt,parentSVG);var x=evt.x,y=evt.y;evt=polar||"y"!==dimension?x:_victoryCore.Selection.getDomainCoordinates(targetProps).x[0];var y1=polar||
"x"!==dimension?y:_victoryCore.Selection.getDomainCoordinates(targetProps).y[0];x=polar||"y"!==dimension?x:_victoryCore.Selection.getDomainCoordinates(targetProps).x[1];polar=polar||"x"!==dimension?y:_victoryCore.Selection.getDomainCoordinates(targetProps).y[1];var mutatedProps={x1:evt,y1:y1,select:!0,x2:x,y2:polar,parentSVG:parentSVG};if(selectedData&&(0,_isFunction2.default)(targetProps.onSelectionCleared))targetProps.onSelectionCleared((0,_defaults2.default)({},mutatedProps,targetProps));targetProps=
[{target:"parent",mutation:function(){return mutatedProps}}];activateSelectedData=selectedData&&activateSelectedData?selectedData.map(function(d){return{childName:d.childName,eventKey:d.eventKey,target:"data",mutation:function(){return null}}}):[];return targetProps.concat.apply(targetProps,_toConsumableArray(activateSelectedData))},onMouseMove:function(evt,targetProps){var select=targetProps.select,polar=targetProps.polar,dimension=targetProps.selectionDimension;if(targetProps.allowSelection&&select){var parentSVG=
targetProps.parentSVG||_victoryCore.Selection.getParentSVG(evt);select=_victoryCore.Selection.getSVGEventCoordinates(evt,parentSVG);evt=select.x;select=select.y;var x2=polar||"y"!==dimension?evt:_victoryCore.Selection.getDomainCoordinates(targetProps).x[1],y2=polar||"x"!==dimension?select:_victoryCore.Selection.getDomainCoordinates(targetProps).y[1];return{target:"parent",mutation:function(){return{x2:x2,y2:y2,parentSVG:parentSVG}}}}return null},onMouseUp:function(evt,targetProps){evt=targetProps.activateSelectedData;
var y2=targetProps.y2;if(!targetProps.allowSelection)return null;if(!targetProps.x2||!y2)return[{target:"parent",mutation:function(){return{select:!1,x1:null,x2:null,y1:null,y2:null}}}];y2=this.getDatasets(targetProps);var bounds=_victoryCore.Selection.getBounds(targetProps),selectedData=this.filterDatasets(targetProps,y2,bounds),mutatedProps={selectedData:selectedData,datasets:y2,select:!1,x1:null,x2:null,y1:null,y2:null},callbackMutation=selectedData&&(0,_isFunction2.default)(targetProps.onSelection)?
targetProps.onSelection(selectedData,bounds,(0,_defaults2.default)({},mutatedProps,targetProps)):{};targetProps=selectedData&&evt?selectedData.map(function(d){return{childName:d.childName,eventKey:d.eventKey,target:"data",mutation:function(){return(0,_assign2.default)({active:!0},callbackMutation)}}}):[];return[{target:"parent",mutation:function(){return mutatedProps}}].concat(targetProps)}};require=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},
ownKeys=Object.keys(source);"function"===typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})));ownKeys.forEach(function(key){var value=source[key];key in target?Object.defineProperty(target,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):target[key]=value})}return target}({},require,{onMouseDown:require.onMouseDown.bind(require),onMouseUp:require.onMouseUp.bind(require),
onMouseMove:(0,global.default)(require.onMouseMove.bind(require),16,{leading:!0,trailing:!1})});exports.default=require}
//# sourceMappingURL=module$node_modules$victory_selection_container$lib$selection_helpers.js.map
