shadow$provide.module$node_modules$victory_core$lib$victory_util$events=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){var JSCompiler_temp=0;for(var arr2=Array(arr.length);JSCompiler_temp<arr.length;JSCompiler_temp++)arr2[JSCompiler_temp]=
arr[JSCompiler_temp];JSCompiler_temp=arr2}else JSCompiler_temp=void 0;JSCompiler_temp||(JSCompiler_temp=Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to spread non-iterable instance");return arr}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _includes2=_interopRequireDefault(require("module$node_modules$lodash$includes")),_uniq2=_interopRequireDefault(require("module$node_modules$lodash$uniq")),
_pickBy2=_interopRequireDefault(require("module$node_modules$lodash$pickBy")),_without2=_interopRequireDefault(require("module$node_modules$lodash$without")),_isFunction2=_interopRequireDefault(require("module$node_modules$lodash$isFunction")),_isEmpty2=_interopRequireDefault(require("module$node_modules$lodash$isEmpty")),_assign6=_interopRequireDefault(require("module$node_modules$lodash$assign"));exports.default={getEvents:function(props,target,eventKey,getScopedEvents){var _this=this,getEventsByTarget=
function(events){var selectedEvents=function(){var targetEvents=events.reduce(function(memo,event){return void 0!==event.target?(Array.isArray(event.target)?(0,_includes2.default)(event.target,target):"".concat(event.target)==="".concat(target))?memo.concat(event):memo:memo.concat(event)},[]);return void 0!==eventKey&&"parent"!==target?targetEvents.filter(function(obj){obj=obj.eventKey;return Array.isArray(obj)?obj.some(function(k){return k?"".concat(k)==="".concat(eventKey):!0}):obj?"".concat(obj)===
"".concat(eventKey):!0}):targetEvents}();return Array.isArray(selectedEvents)&&selectedEvents.reduce(function(memo,event){return event?(0,_assign6.default)(memo,event.eventHandlers):memo},{})},allEvents=function(){if(Array.isArray(_this.componentEvents)){var _this$componentEvents;return Array.isArray(props.events)?(_this$componentEvents=_this.componentEvents).concat.apply(_this$componentEvents,_toConsumableArray(props.events)):_this.componentEvents}return props.events}();getScopedEvents=allEvents&&
(0,_isFunction2.default)(getScopedEvents)?getScopedEvents(getEventsByTarget(allEvents),target):void 0;if(!props.sharedEvents)return getScopedEvents;allEvents=props.sharedEvents.getEvents;getEventsByTarget=props.sharedEvents.events&&allEvents(getEventsByTarget(props.sharedEvents.events),target);return(0,_assign6.default)({},getEventsByTarget,getScopedEvents)},getScopedEvents:function(events,namespace,childType,baseProps){var _this2=this;if((0,_isEmpty2.default)(events))return{};baseProps=baseProps||
this.baseProps;var getTargetProps=function(identifier,type){var childName=identifier.childName,target=identifier.target;identifier=identifier.key;type="props"===type?baseProps:_this2.state||{};childName=void 0!==childName&&null!==childName&&type[childName]?type[childName]:type;return"parent"===identifier?childName.parent:childName[identifier]&&childName[identifier][target]},parseEvent=function(eventReturn,eventKey){var childNames="parent"===namespace?eventReturn.childName:eventReturn.childName||childType,
target=eventReturn.target||namespace,getKeys=function(childName){return"parent"===target?"parent":"all"===eventReturn.eventKey?baseProps[childName]?(0,_without2.default)(Object.keys(baseProps[childName]),"parent"):(0,_without2.default)(Object.keys(baseProps),"parent"):void 0===eventReturn.eventKey&&"parent"===eventKey?baseProps[childName]?Object.keys(baseProps[childName]):Object.keys(baseProps):void 0!==eventReturn.eventKey?eventReturn.eventKey:eventKey},getMutationObject=function(key,childName){var baseState=
_this2.state||{};if(!(0,_isFunction2.default)(eventReturn.mutation))return baseState;var mutationTargetProps=getTargetProps({childName:childName,key:key,target:target},"props"),mutationTargetState=getTargetProps({childName:childName,key:key,target:target},"state"),mutatedProps=eventReturn.mutation((0,_assign6.default)({},mutationTargetProps,mutationTargetState),baseProps);mutationTargetProps=baseState[childName]||{};mutationTargetState=function(state){mutatedProps?state="parent"===target?(0,_assign6.default)(state,
_defineProperty({},key,(0,_assign6.default)(state[key],mutatedProps))):(0,_assign6.default)(state,_defineProperty({},key,(0,_assign6.default)(state[key],_defineProperty({},target,mutatedProps)))):(state[key]&&state[key][target]&&delete state[key][target],state[key]&&!Object.keys(state[key]).length&&delete state[key]);return state};return void 0!==childName&&null!==childName?(0,_assign6.default)(baseState,_defineProperty({},childName,mutationTargetState(mutationTargetProps))):mutationTargetState(baseState)},
getReturnByChild=function(childName){var mutationKeys=getKeys(childName);return Array.isArray(mutationKeys)?mutationKeys.reduce(function(memo,key){return(0,_assign6.default)(memo,getMutationObject(key,childName))},{}):getMutationObject(mutationKeys,childName)};childNames="all"===childNames?(0,_without2.default)(Object.keys(baseProps),"parent"):childNames;return Array.isArray(childNames)?childNames.reduce(function(memo,childName){return(0,_assign6.default)(memo,getReturnByChild(childName))},{}):getReturnByChild(childNames)},
parseEventReturn=function(eventReturn,eventKey){return Array.isArray(eventReturn)?eventReturn.reduce(function(memo,props){return memo=(0,_assign6.default)({},memo,parseEvent(props,eventKey))},{}):parseEvent(eventReturn,eventKey)},compileCallbacks=function(eventReturn){var getCallback=function(obj){return(0,_isFunction2.default)(obj.callback)&&obj.callback},callbackArray=(Array.isArray(eventReturn)?eventReturn.map(function(evtObj){return getCallback(evtObj)}):[getCallback(eventReturn)]).filter(function(callback){return!1!==
callback});return callbackArray.length?function(){return callbackArray.forEach(function(callback){return callback()})}:void 0},onEvent=function(evt,childProps,eventKey,eventName){if(evt=events[eventName](evt,childProps,eventKey,_this2))childProps=compileCallbacks(evt),_this2.setState(parseEventReturn(evt,eventKey),childProps)};return Object.keys(events).reduce(function(memo,event){memo[event]=onEvent;return memo},{})},getPartialEvents:function(events,eventKey,childProps){return events?Object.keys(events).reduce(function(memo,
eventName){memo[eventName]=function(evt){return events[eventName](evt,childProps,eventKey,eventName)};return memo},{}):{}},getEventState:function(eventKey,namespace,childType){var state=this.state||{};return childType?state[childType]&&state[childType][eventKey]&&state[childType][eventKey][namespace]:"parent"===eventKey?state[eventKey]&&state[eventKey][namespace]||state[eventKey]:state[eventKey]&&state[eventKey][namespace]},getExternalMutationsWithChildren:function(mutations,baseProps,baseState,childNames){var _this3=
this;baseProps=baseProps||{};baseState=baseState||{};return childNames.reduce(function(memo,childName){var childState=baseState[childName],mutation=_this3.getExternalMutations(mutations,baseProps[childName],baseState[childName],childName);memo[childName]=mutation?mutation:childState;return(0,_pickBy2.default)(memo,function(v){return!(0,_isEmpty2.default)(v)})},{})},getExternalMutations:function(mutations,baseProps,baseState,childName){var _this4=this;baseProps=baseProps||{};baseState=baseState||{};
return Object.keys(baseProps).reduce(function(memo,eventKey){var keyState=baseState[eventKey]||{},keyProps=baseProps[eventKey]||{};if("parent"===eventKey){var mutation$jscomp$0=_this4.getExternalMutation(mutations,keyProps,keyState,{eventKey:eventKey,target:"parent"});memo[eventKey]=void 0!==mutation$jscomp$0?(0,_assign6.default)({},keyState,mutation$jscomp$0):keyState}else mutation$jscomp$0=(0,_uniq2.default)(Object.keys(keyProps).concat(Object.keys(keyState))),memo[eventKey]=mutation$jscomp$0.reduce(function(m,
target){var mutation=_this4.getExternalMutation(mutations,keyProps[target],keyState[target],{eventKey:eventKey,target:target,childName:childName});m[target]=void 0!==mutation?(0,_assign6.default)({},keyState[target],mutation):keyState[target];return(0,_pickBy2.default)(m,function(v){return!(0,_isEmpty2.default)(v)})},{});return(0,_pickBy2.default)(memo,function(v){return!(0,_isEmpty2.default)(v)})},{})},getExternalMutation:function(mutations,baseProps,baseState,identifier){var filterMutations=function(mutation,
type){return"string"===typeof mutation[type]?"all"===mutation[type]||mutation[type]===identifier[type]:Array.isArray(mutation[type])?(mutation=mutation[type].map(function(m){return"".concat(m)}),(0,_includes2.default)(mutation,identifier[type])):!1},scopedMutations=mutations=Array.isArray(mutations)?mutations:[mutations];identifier.childName&&(scopedMutations=mutations.filter(function(m){return filterMutations(m,"childName")}));mutations=scopedMutations.filter(function(m){return filterMutations(m,
"target")});if(!(0,_isEmpty2.default)(mutations)&&(mutations=mutations.filter(function(m){return filterMutations(m,"eventKey")}),!(0,_isEmpty2.default)(mutations)))return mutations.reduce(function(memo,curr){curr=(curr&&(0,_isFunction2.default)(curr.mutation)?curr.mutation:function(){})((0,_assign6.default)({},baseProps,baseState));return(0,_assign6.default)({},memo,curr)},{})},getComponentEvents:function(props,components){return(components=Array.isArray(components)&&components.reduce(function(memo,
componentName){var _memo,defaultEvents=(componentName=props[componentName])&&componentName.type&&componentName.type.defaultEvents;componentName=(0,_isFunction2.default)(defaultEvents)?defaultEvents(componentName.props):defaultEvents;return memo=Array.isArray(componentName)?(_memo=memo).concat.apply(_memo,_toConsumableArray(componentName)):memo},[]))&&components.length?components:void 0}}}
//# sourceMappingURL=module$node_modules$victory_core$lib$victory_util$events.js.map
