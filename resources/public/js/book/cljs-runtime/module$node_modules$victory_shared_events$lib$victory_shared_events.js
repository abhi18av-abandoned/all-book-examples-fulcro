shadow$provide.module$node_modules$victory_shared_events$lib$victory_shared_events=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){var JSCompiler_temp=0;for(var arr2=Array(arr.length);JSCompiler_temp<arr.length;JSCompiler_temp++)arr2[JSCompiler_temp]=arr[JSCompiler_temp];JSCompiler_temp=arr2}else JSCompiler_temp=void 0;JSCompiler_temp||(JSCompiler_temp=Symbol.iterator in
Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to spread non-iterable instance");return arr}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,
protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});superClass&&(Object.setPrototypeOf?
Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _fromPairs2=_interopRequireDefault(require("module$node_modules$lodash$fromPairs")),_isEmpty2=_interopRequireDefault(require("module$node_modules$lodash$isEmpty")),_defaults2=_interopRequireDefault(require("module$node_modules$lodash$defaults")),
_isFunction2=_interopRequireDefault(require("module$node_modules$lodash$isFunction")),_assign2=_interopRequireDefault(require("module$node_modules$lodash$assign")),_react=_interopRequireDefault(require("module$node_modules$react$index"));global=_interopRequireDefault(require("module$node_modules$prop_types$index"));var _victoryCore=require("module$node_modules$victory_core$lib$index"),_reactFastCompare=_interopRequireDefault(require("module$node_modules$react_fast_compare$index"));require=function(_React$Component){function VictorySharedEvents(props){if(!(this instanceof
VictorySharedEvents))throw new TypeError("Cannot call a class as a function");var _this=(VictorySharedEvents.__proto__||Object.getPrototypeOf(VictorySharedEvents)).call(this,props);_this=!_this||"object"!==typeof _this&&"function"!==typeof _this?_assertThisInitialized(this):_this;_this.state=_this.state||{};_this.getScopedEvents=_victoryCore.Events.getScopedEvents.bind(_assertThisInitialized(_this));_this.getEventState=_victoryCore.Events.getEventState.bind(_assertThisInitialized(_this));_this.getTimer=
_this.getTimer.bind(_assertThisInitialized(_this));_this.baseProps=_this.getBaseProps(props);return _this}_inherits(VictorySharedEvents,_React$Component);_createClass(VictorySharedEvents,[{key:"getChildContext",value:function(){return{getTimer:this.getTimer}}},{key:"shouldComponentUpdate",value:function(nextProps){if(!(0,_reactFastCompare.default)(this.props,nextProps)){this.baseProps=this.getBaseProps(nextProps);var externalMutations=this.getExternalMutations(nextProps,this.baseProps);this.applyExternalMutations(nextProps,
externalMutations)}return!0}},{key:"getTimer",value:function(){if(this.context.getTimer)return this.context.getTimer();this.timer||(this.timer=new _victoryCore.Timer);return this.timer}},{key:"getAllEvents",value:function(props){var componentEvents=_victoryCore.Events.getComponentEvents(props,["container","groupComponent"]);return Array.isArray(componentEvents)?Array.isArray(props.events)?componentEvents.concat.apply(componentEvents,_toConsumableArray(props.events)):componentEvents:props.events}},
{key:"applyExternalMutations",value:function(props,externalMutations){if(!(0,_isEmpty2.default)(externalMutations)){var callbacks=props.externalEventMutations.reduce(function(memo,mutation){return memo=(0,_isFunction2.default)(mutation.callback)?memo.concat(mutation.callback):memo},[]);this.setState(externalMutations,callbacks.length?function(){callbacks.forEach(function(c){return c()})}:void 0)}}},{key:"getExternalMutations",value:function(props,baseProps){return(0,_isEmpty2.default)(props.externalEventMutations)?
void 0:_victoryCore.Events.getExternalMutationsWithChildren(props.externalEventMutations,baseProps,this.state,Object.keys(baseProps))}},{key:"getBaseProps",value:function(props){props=props.container;var children=_react.default.Children.toArray(this.props.children);children=this.getBasePropsFromChildren(children);props=props?props.props:{};return(0,_assign2.default)({},children,{parent:props})}},{key:"getBasePropsFromChildren",value:function(childComponents){childComponents=_victoryCore.Helpers.reduceChildren(childComponents,
function(child,childName){return child.type&&(0,_isFunction2.default)(child.type.getBaseProps)?(child=child.props&&child.type.getBaseProps(child.props))?[[childName,child]]:null:null});return(0,_fromPairs2.default)(childComponents)}},{key:"getNewChildren",value:function(props,baseProps){var _this2=this,events=props.events,eventKey=props.eventKey,alterChildren=function(children,childNames){return children.reduce(function(memo,child,index){if(child.props.children){var newChildren=_react.default.Children.toArray(child.props.children);
index=childNames.slice(index,index+newChildren.length);child=_react.default.cloneElement(child,child.props,alterChildren(newChildren,index));return memo.concat(child)}if(child.type&&(0,_isFunction2.default)(child.type.getBaseProps)){var name=child.props.name||childNames[index];newChildren={events:Array.isArray(events)&&events.filter(function(event){return"parent"===event.target?!1:Array.isArray(event.childName)?-1<event.childName.indexOf(name):event.childName===name||"all"===event.childName}),getEvents:function(evts,
target){return _this2.getScopedEvents(evts,target,name,baseProps)},getEventState:function(key,target){return _this2.getEventState(key,target,name)}};return memo.concat(_react.default.cloneElement(child,(0,_assign2.default)({key:"events-".concat(name),sharedEvents:newChildren,eventKey:eventKey,name:name},child.props)))}return memo.concat(child)},[])},childNames$jscomp$0=Object.keys(baseProps);props=_react.default.Children.toArray(props.children);return alterChildren(props,childNames$jscomp$0)}},{key:"getContainer",
value:function(props,baseProps,events){var _this3=this,children=this.getNewChildren(props,baseProps);events=Array.isArray(events)&&events.filter(function(event){return"parent"===event.target});var sharedEvents=0<events.length?{events:events,getEvents:function(evts,target){return _this3.getScopedEvents(evts,target,null,baseProps)},getEventState:this.getEventState}:null;props=props.container||props.groupComponent;events=props.type&&props.type.role;var containerProps=props.props||{},boundGetEvents=_victoryCore.Events.getEvents.bind(this);
boundGetEvents=sharedEvents&&boundGetEvents({sharedEvents:sharedEvents},"parent");sharedEvents=(0,_defaults2.default)({},this.getEventState("parent","parent"),containerProps,baseProps.parent,{children:children});containerProps=(0,_defaults2.default)({},_victoryCore.Events.getPartialEvents(boundGetEvents,"parent",sharedEvents),containerProps.events);return"container"===events?_react.default.cloneElement(props,(0,_assign2.default)({},sharedEvents,{events:containerProps})):_react.default.cloneElement(props,
containerProps,children)}},{key:"render",value:function(){var events=this.getAllEvents(this.props);return events?this.getContainer(this.props,this.baseProps,events):_react.default.cloneElement(this.props.container,{children:this.props.children})}}]);return VictorySharedEvents}(_react.default.Component);exports.default=require;Object.defineProperty(require,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictorySharedEvents"});Object.defineProperty(require,"role",{configurable:!0,enumerable:!0,
writable:!0,value:"shared-event-wrapper"});Object.defineProperty(require,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:global.default.oneOfType([global.default.arrayOf(global.default.node),global.default.node]),container:global.default.node,eventKey:global.default.oneOfType([global.default.array,global.default.func,_victoryCore.PropTypes.allOfType([_victoryCore.PropTypes.integer,_victoryCore.PropTypes.nonNegative]),global.default.string]),events:global.default.arrayOf(global.default.shape({childName:global.default.oneOfType([global.default.string,
global.default.array]),eventHandlers:global.default.object,eventKey:global.default.oneOfType([global.default.array,global.default.func,_victoryCore.PropTypes.allOfType([_victoryCore.PropTypes.integer,_victoryCore.PropTypes.nonNegative]),global.default.string]),target:global.default.string})),externalEventMutations:global.default.arrayOf(global.default.shape({callback:global.default.function,childName:global.default.oneOfType([global.default.string,global.default.array]),eventKey:global.default.oneOfType([global.default.array,
_victoryCore.PropTypes.allOfType([_victoryCore.PropTypes.integer,_victoryCore.PropTypes.nonNegative]),global.default.string]),mutation:global.default.function,target:global.default.oneOfType([global.default.string,global.default.array])})),groupComponent:global.default.node}});Object.defineProperty(require,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:_react.default.createElement("g",null)}});Object.defineProperty(require,"contextTypes",{configurable:!0,enumerable:!0,
writable:!0,value:{getTimer:global.default.func}});Object.defineProperty(require,"childContextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:global.default.func}})}
//# sourceMappingURL=module$node_modules$victory_shared_events$lib$victory_shared_events.js.map
