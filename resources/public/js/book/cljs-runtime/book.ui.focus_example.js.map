{"version":3,"sources":["book/ui/focus_example.cljs"],"mappings":"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","names":["options__72617__auto__","params","com.fulcrologic.fulcro.components/make-state-map","this","props","com.fulcrologic.fulcro.components/wrapped-render","map__80808","com.fulcrologic.fulcro.components/props","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","js/book","js/book.ui","js/book.ui.focus-example","js/book.ui.focus-example.ClickToEditField","props__72618__auto__","this__72619__auto__","temp__5733__auto__","init-state__72620__auto__","obj80837","G__80838","G__80839","goog.object/get","obj80842","com.fulcrologic.fulcro.components/configure-component!","book.ui.focus-example/ClickToEditField","value","editing?","_","r","goog.object/set","prev-props","and__4120__auto__","cljs.core/not","temp__5735__auto__","input-field","save-ref","com.fulcrologic.fulcro.components.get_state.cljs$core$IFn$_invoke$arity$2","com.fulcrologic.fulcro.dom.macro_create_element.cljs$core$IFn$_invoke$arity$3","com.fulcrologic.fulcro.components/force-children","com.fulcrologic.fulcro.mutations/toggle!","p1__80801#","com.fulcrologic.fulcro.mutations.set_string_BANG_.cljs$core$IFn$_invoke$arity$variadic","book.ui.focus-example/ui-click-to-edit","com.fulcrologic.fulcro.components.factory.cljs$core$IFn$_invoke$arity$1","map__80850","js/book.ui.focus-example.Root","obj80853","G__80854","G__80855","obj80860","book.ui.focus-example/Root","field","com.fulcrologic.fulcro.components.get_query.cljs$core$IFn$_invoke$arity$1"],"sourcesContent":["(ns book.ui.focus-example\n  (:require [com.fulcrologic.fulcro.components :as comp :refer [defsc]]\n            [com.fulcrologic.fulcro.dom :as dom]\n            [com.fulcrologic.fulcro.mutations :as m]\n            [goog.object :as gobj]))\n\n(defsc ClickToEditField [this {:keys [value editing?]}]\n  {:initial-state      {:value    \"ABC\"\n                        :db/id    1\n                        :editing? false}\n   :query              [:db/id :value :editing?]\n   :ident              [:field/by-id :db/id]\n   :initLocalState     (fn [this _]\n                         {:save-ref (fn [r] (gobj/set this \"input-ref\" r))})\n   :componentDidUpdate (fn [this prev-props _]\n                         (when (and (not (:editing? prev-props)) (:editing? (comp/props this)))\n                           (when-let [input-field (gobj/get this \"input-ref\")]\n                             (.focus input-field))))}\n  (let [save-ref (comp/get-state this :save-ref)]\n    (dom/div\n      ; trigger a focus based on a state change (componentDidUpdate)\n      (dom/a {:onClick #(m/toggle! this :editing?)}\n        \"Click to focus (if not already editing): \")\n      (dom/input {:value    value\n                  :onChange #(m/set-string! this :event %)\n                  :ref      save-ref})\n      ; do an explicit focus\n      (dom/button {:onClick (fn []\n                              (when-let [input-field (gobj/get this \"input-ref\")]\n                                (.focus input-field)\n                                (.setSelectionRange input-field 0 (.. input-field -value -length))))}\n        \"Highlight All\"))))\n\n(def ui-click-to-edit (comp/factory ClickToEditField))\n\n(defsc Root [this {:keys [field] :as props}]\n  {:query         [{:field (comp/get-query ClickToEditField)}]\n   :initial-state {:field {}}}\n  (ui-click-to-edit field))\n"]}