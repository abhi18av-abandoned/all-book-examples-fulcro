shadow$provide.module$node_modules$victory_zoom_container$lib$zoom_helpers=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){var JSCompiler_temp=Array.isArray(arr)?arr:void 0;if(!JSCompiler_temp){JSCompiler_temp=[];var _n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(JSCompiler_temp.push(_s.value),!i||JSCompiler_temp.length!==i);_n=!0);}catch(err){_d=!0,
_e=err}finally{try{if(!_n&&null!=_i["return"])_i["return"]()}finally{if(_d)throw _e;}}}if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to destructure non-iterable instance");return arr}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.RawZoomHelpers=void 0;var _defaults2=_interopRequireDefault(require("module$node_modules$lodash$defaults")),_isFunction2=_interopRequireDefault(require("module$node_modules$lodash$isFunction"));global=_interopRequireDefault(require("module$node_modules$lodash$throttle"));
var _react=require("module$node_modules$react$index"),_victoryCore=require("module$node_modules$victory_core$lib$index");require={checkDomainEquality:function(a,b){var checkDimension=function(dim){var val1=a&&a[dim];dim=b&&b[dim];return val1||dim?val1&&dim?+val1[0]===+dim[0]&&+val1[1]===+dim[1]:!1:!0};return checkDimension("x")&&checkDimension("y")},scale:function(currentDomain,evt,props,axis){var _currentDomain=_slicedToArray(currentDomain,2),from=_currentDomain[0],range=Math.abs(_currentDomain[1]-
from);_currentDomain=props.minimumZoom&&props.minimumZoom[axis];var factor=this.getScaleFactor(evt);if(_currentDomain&&range<=_currentDomain&&1>factor)return currentDomain;var _getDomain$axis=_slicedToArray(this.getDomain(props)[axis],2);_currentDomain=_getDomain$axis[0];_getDomain$axis=_getDomain$axis[1];evt=this.getScalePercent(evt,props,axis);props=this.getMinimumDomain(factor*from+evt*factor*range,props,axis);currentDomain=this.getScaledDomain(currentDomain,factor,evt);axis=_slicedToArray(currentDomain,
2);currentDomain=axis[0];axis=axis[1];currentDomain=[currentDomain>_currentDomain&&currentDomain<_getDomain$axis?currentDomain:_currentDomain,axis<_getDomain$axis&&axis>_currentDomain?axis:_getDomain$axis];currentDomain=Math.abs(props[1]-props[0])>Math.abs(currentDomain[1]-currentDomain[0])?props:currentDomain;return _victoryCore.Collection.containsDates([_currentDomain,_getDomain$axis])?[new Date(currentDomain[0]),new Date(currentDomain[1])]:currentDomain},getScaledDomain:function(currentDomain,
factor,percent){var _currentDomain2=_slicedToArray(currentDomain,2);currentDomain=_currentDomain2[0];_currentDomain2=_currentDomain2[1];var range=Math.abs(_currentDomain2-currentDomain);factor=range-range*factor;currentDomain=+currentDomain+factor*percent;percent=+_currentDomain2-factor*(1-percent);return[Math.min(currentDomain,percent),Math.max(currentDomain,percent)]},getMinimumDomain:function(point,props,axis){var minimumZoom=props.minimumZoom;props=this.getDomain(props)[axis];var _originalDomain=
_slicedToArray(props,2);props=_originalDomain[0];_originalDomain=_originalDomain[1];var defaultMin=Math.abs(props-_originalDomain)/1E3;axis=minimumZoom?minimumZoom[axis]||defaultMin:defaultMin;minimumZoom=point-axis/2;point+=axis/2;return[minimumZoom>props&&minimumZoom<_originalDomain?minimumZoom:props,point<_originalDomain&&point>props?point:+props+axis/2]},zoommingOut:function(evt){return 0<evt.deltaY},getScaleFactor:function(evt){var sign=this.zoommingOut(evt)?1:-1;return Math.abs(1+sign*Math.min(Math.abs(evt.deltaY/
300),.5))},getScalePercent:function(evt,props,axis){var originalDomain=this.getDomain(props),_originalDomain$axis=_slicedToArray(originalDomain[axis],2),from=_originalDomain$axis[0];_originalDomain$axis=_originalDomain$axis[1];return(this.getPosition(evt,props,originalDomain)[axis]-from)/Math.abs(_originalDomain$axis-from)},getPosition:function(evt,props,originalDomain){var _Selection$getSVGEven=_victoryCore.Selection.getSVGEventCoordinates(evt);evt=_Selection$getSVGEven.x;_Selection$getSVGEven=_Selection$getSVGEven.y;
originalDomain={x:props.scale.x.domain(originalDomain.x),y:props.scale.y.domain(originalDomain.y)};return _victoryCore.Selection.getDataCoordinates(props,originalDomain,evt,_Selection$getSVGEven)},pan:function(currentDomain,originalDomain,delta){var _currentDomain$map=currentDomain.map(function(val){return+val}),_currentDomain$map2=_slicedToArray(_currentDomain$map,2);_currentDomain$map=_currentDomain$map2[0];_currentDomain$map2=_currentDomain$map2[1];var _originalDomain$map=originalDomain.map(function(val){return+val}),
_originalDomain$map2=_slicedToArray(_originalDomain$map,2);_originalDomain$map=_originalDomain$map2[0];_originalDomain$map2=_originalDomain$map2[1];var lowerBound=_currentDomain$map+delta;delta=_currentDomain$map2+delta;delta=lowerBound>_originalDomain$map&&delta<_originalDomain$map2?[lowerBound,delta]:lowerBound<_originalDomain$map?[_originalDomain$map,_originalDomain$map+(_currentDomain$map2-_currentDomain$map)]:delta>_originalDomain$map2?[_originalDomain$map2-(_currentDomain$map2-_currentDomain$map),
_originalDomain$map2]:currentDomain;return _victoryCore.Collection.containsDates(currentDomain)||_victoryCore.Collection.containsDates(originalDomain)?delta.map(function(val){return new Date(val)}):delta},getDomainScale:function(domain,scale,axis){domain=Array.isArray(domain)?domain:domain[axis];var _axisDomain=_slicedToArray(domain,2);domain=_axisDomain[0];_axisDomain=_axisDomain[1];scale=scale[axis].range();return Math.abs(scale[0]-scale[1])/(_axisDomain-domain)},handleAnimation:function(ctx){var getTimer=
(0,_isFunction2.default)(ctx.getTimer)&&ctx.getTimer.bind(ctx);if(getTimer&&(0,_isFunction2.default)(getTimer().bypassAnimation))return getTimer().bypassAnimation(),(0,_isFunction2.default)(getTimer().resumeAnimation)?function(){return getTimer().resumeAnimation()}:void 0},getLastDomain:function(targetProps,originalDomain){var zoomDomain=targetProps.zoomDomain,cachedZoomDomain=targetProps.cachedZoomDomain,currentDomain=targetProps.currentDomain;targetProps=targetProps.domain;return zoomDomain&&!this.checkDomainEquality(zoomDomain,
cachedZoomDomain)?(0,_defaults2.default)({},zoomDomain,targetProps):(0,_defaults2.default)({},currentDomain||zoomDomain||originalDomain,targetProps)},getDomain:function(props){var originalDomain=props.originalDomain,domain=props.domain,children=props.children,zoomDimension=props.zoomDimension,xAxis="x",yAxis="y",zoomAxis=zoomDimension;props.horizontal&&(xAxis="y",yAxis="x",zoomDimension&&(zoomAxis={x:xAxis,y:yAxis}[zoomDimension]));children=_react.Children.toArray(children);var childrenDomain={};
children.length&&(zoomDimension?(xAxis={},props=_victoryCore.Wrapper.getDomainFromChildren(props,zoomAxis,children),zoomDimension in xAxis?Object.defineProperty(xAxis,zoomDimension,{value:props,enumerable:!0,configurable:!0,writable:!0}):xAxis[zoomDimension]=props,zoomDimension=xAxis):zoomDimension={x:_victoryCore.Wrapper.getDomainFromChildren(props,xAxis,children),y:_victoryCore.Wrapper.getDomainFromChildren(props,yAxis,children)},childrenDomain=zoomDimension);return(0,_defaults2.default)({},childrenDomain,
originalDomain,domain)},onMouseDown:function(evt,targetProps){evt.preventDefault();if(targetProps.allowPan){var parentSVG=targetProps.parentSVG||_victoryCore.Selection.getParentSVG(evt);evt=_victoryCore.Selection.getSVGEventCoordinates(evt,parentSVG);var x=evt.x,y=evt.y;return[{target:"parent",mutation:function(){return{startX:x,startY:y,panning:!0,parentSVG:parentSVG,parentControlledProps:["domain"]}}}]}},onMouseUp:function(evt,targetProps){if(targetProps.allowPan)return[{target:"parent",mutation:function(){return{panning:!1}}}]},
onMouseLeave:function(evt,targetProps){if(targetProps.allowPan)return[{target:"parent",mutation:function(){return{panning:!1}}}]},onMouseMove:function(evt,targetProps,eventKey,ctx){if(targetProps.panning&&targetProps.allowPan){var scale=targetProps.scale,startX=targetProps.startX,startY=targetProps.startY;eventKey=targetProps.onZoomDomainChange;var zoomDimension=targetProps.zoomDimension,zoomDomain=targetProps.zoomDomain,parentSVG=targetProps.parentSVG||_victoryCore.Selection.getParentSVG(evt),_Selection$getSVGEven3=
_victoryCore.Selection.getSVGEventCoordinates(evt,parentSVG);evt=_Selection$getSVGEven3.x;_Selection$getSVGEven3=_Selection$getSVGEven3.y;var originalDomain=this.getDomain(targetProps),lastDomain=this.getLastDomain(targetProps,originalDomain);startX=(startX-evt)/this.getDomainScale(lastDomain,scale,"x");scale=(_Selection$getSVGEven3-startY)/this.getDomainScale(lastDomain,scale,"y");zoomDimension={x:"y"===zoomDimension?originalDomain.x:this.pan(lastDomain.x,originalDomain.x,startX),y:"x"===zoomDimension?
originalDomain.y:this.pan(lastDomain.y,originalDomain.y,scale)};ctx=this.handleAnimation(ctx);lastDomain=!this.checkDomainEquality(originalDomain,lastDomain);var mutatedProps={parentControlledProps:["domain"],startX:evt,startY:_Selection$getSVGEven3,parentSVG:parentSVG,domain:zoomDimension,currentDomain:zoomDimension,originalDomain:originalDomain,cachedZoomDomain:zoomDomain,zoomActive:lastDomain};(0,_isFunction2.default)(eventKey)&&eventKey(zoomDimension,(0,_defaults2.default)({},mutatedProps,targetProps));
return[{target:"parent",callback:ctx,mutation:function(){return mutatedProps}}]}},onWheel:function(evt,targetProps,eventKey,ctx){if(targetProps.allowZoom){eventKey=targetProps.onZoomDomainChange;var zoomDimension=targetProps.zoomDimension,zoomDomain=targetProps.zoomDomain,originalDomain=this.getDomain(targetProps),lastDomain=this.getLastDomain(targetProps,originalDomain),x=lastDomain.x,y=lastDomain.y;zoomDimension={x:"y"===zoomDimension?lastDomain.x:this.scale(x,evt,targetProps,"x"),y:"x"===zoomDimension?
lastDomain.y:this.scale(y,evt,targetProps,"y")};ctx=this.handleAnimation(ctx);evt=!this.zoommingOut(evt)||targetProps.zoomActive&&!this.checkDomainEquality(originalDomain,lastDomain);var mutatedProps={domain:zoomDimension,currentDomain:zoomDimension,originalDomain:originalDomain,cachedZoomDomain:zoomDomain,parentControlledProps:["domain"],panning:!1,zoomActive:evt};(0,_isFunction2.default)(eventKey)&&eventKey(zoomDimension,(0,_defaults2.default)({},mutatedProps,targetProps));return[{target:"parent",
callback:ctx,mutation:function(){return mutatedProps}}]}}};exports.RawZoomHelpers=require;require={checkDomainEquality:require.checkDomainEquality.bind(require),onMouseDown:require.onMouseDown.bind(require),onMouseUp:require.onMouseUp.bind(require),onMouseLeave:require.onMouseLeave.bind(require),onMouseMove:(0,global.default)(require.onMouseMove.bind(require),16,{leading:!0,trailing:!1}),onWheel:(0,global.default)(require.onWheel.bind(require),16,{leading:!0,trailing:!1})};exports.default=require}
//# sourceMappingURL=module$node_modules$victory_zoom_container$lib$zoom_helpers.js.map
